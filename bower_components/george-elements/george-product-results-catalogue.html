<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/paper-fab/paper-fab.html">
<link rel="import" href="/bower_components/core-ajax/core-ajax.html">

<script src="/bower_components/jquery/dist/jquery.js"></script>
<script src="/bower_components/slick.js/slick/slick.js"></script>

<polymer-element name="george-product-results-catalogue">

  <template>
    <style>
      #carousel{
        height:100%;
      }
      .item {
        margin-left: 50px;
        margin-right: 50px;
        margin-bottom: 5px;
        margin-top: 5px;
        width:100%;
        height:100%;
      }

      .item img {
        /* z=1 paper-shadow */
        max-height: 200px;
        box-shadow: 0 2px 10px 0 rgba(0, 0, 0, 0.16), 0 2px 5px 0 rgba(0, 0, 0, 0.26);
      }
    </style>

    <link rel="stylesheet" href="/bower_components/slick.js/slick/slick.css"/>
    <core-ajax id="ajax" auto url="/bower_components/george-elements/results.json" on-core-response="{{resultsLoaded}}" handleAs="json"></core-ajax>

    <div id="carousel"></div>
  </template>

  <script>
    Polymer({
      resultsLoaded: function() {
        this.results = this.$.ajax.response.slice(0);
        this.inflateCarousel();
      },

      inflateCarousel: function() {
        $(this.$.carousel).slick({
              arrows: true,
              infinite: true,
              nextArrow: '<paper-fab mini icon="arrow-forward" class="slick-next"></paper-fab>',
              prevArrow: '<paper-fab mini icon="arrow-back" class="slick-prev"></paper-fab>',
              slidesToShow: 1,
              slidesToScroll: 1
        });

        for (i = 0; i < this.results.length; i++) {
            $(this.$.carousel).slickAdd("<div class='item'><img src='" + this.results[i].image + "'/></div>");
        }
      }
    });

  </script>
</polymer-element>
